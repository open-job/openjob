import{u as Z}from"./vue-i18n.cjs.f888bd5c.js";import{u as D}from"./index.474f94a3.js";import{J as U}from"./index.4ac74e37.js";import{ay as A}from"./index.070d5527.js";import{h as V,r as B,K as j,o as M,a9 as p,j as i,k as b,D as l,x as s,u,F as S,Z as v,B as z,C,v as _}from"./vue.543fafcc.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";import"./_commonjsHelpers.35101cd5.js";import"./request.be218ac0.js";import"./storage.b628b270.js";import"./index.899fa70a.js";import"./index.18e5bded.js";import"./themeConfig.ab165958.js";import"./index.3b68140d.js";const T={class:"system-config-container"},h=V({name:"systemRoleDialog"}),I=V({...h,emits:["refresh"],setup(E,{emit:N}){const{t:o}=Z(),F=B(),e=j({selectDays:[{value:1,label:o("message.server.system.selectDays.oneDay")},{value:7,label:o("message.server.system.selectDays.oneWeek")},{value:30,label:o("message.server.system.selectDays.oneMonth")},{value:90,label:o("message.server.system.selectDays.threeMonth")},{value:180,label:o("message.server.system.selectDays.SixMonth")},{value:365,label:o("message.server.system.selectDays.oneYear")},{value:1095,label:o("message.server.system.selectDays.threeYear")}],fromRules:{},ruleForm:{version:"",maxSlot:"256",clusterVersion:"",clusterDelayVersion:"",workerSupervisorSlot:"",delayZsetSlot:"",delayFailZsetSlot:"",delayAddListSlot:"",delayStatusListSlot:"",delayDeleteListSlot:"",jobKeepDays:"",delayKeepDays:"",serverKeepDays:"",workerKeepDays:""}}),g=async r=>{!r||await r.validate(t=>{if(t)x();else return!1})},x=async()=>{U.confirm(o("message.server.system.updateTitle"),o("message.commonMsg.tip"),{confirmButtonText:o("message.commonBtn.confirm"),cancelButtonText:o("message.commonBtn.cancel"),type:"warning"}).then(async()=>{await D().updateSystem({delayZsetSlot:e.ruleForm.delayZsetSlot,delayFailZsetSlot:e.ruleForm.delayFailZsetSlot,delayAddListSlot:e.ruleForm.delayAddListSlot,delayStatusListSlot:e.ruleForm.delayStatusListSlot,delayDeleteListSlot:e.ruleForm.delayDeleteListSlot,jobKeepDays:e.ruleForm.jobKeepDays,delayKeepDays:e.ruleForm.delayKeepDays,serverKeepDays:e.ruleForm.serverKeepDays,workerKeepDays:e.ruleForm.workerKeepDays,maxSlot:e.ruleForm.maxSlot}),A.success(o("message.commonMsg.updateSuccess"))}).catch(()=>{})},w=async()=>{let r=await D().getSystemInfo({});e.ruleForm.version=r.version,e.ruleForm.maxSlot=r.maxSlot,e.ruleForm.clusterVersion=r.clusterVersion,e.ruleForm.clusterDelayVersion=r.clusterDelayVersion,e.ruleForm.workerSupervisorSlot=r.workerSupervisorSlot,e.ruleForm.delayZsetSlot=r.delayZsetSlot,e.ruleForm.delayFailZsetSlot=r.delayFailZsetSlot,e.ruleForm.delayAddListSlot=r.delayAddListSlot,e.ruleForm.delayStatusListSlot=r.delayStatusListSlot,e.ruleForm.delayDeleteListSlot=r.delayDeleteListSlot,e.ruleForm.jobKeepDays=r.jobKeepDays,e.ruleForm.delayKeepDays=r.delayKeepDays,e.ruleForm.serverKeepDays=r.serverKeepDays,e.ruleForm.workerKeepDays=r.workerKeepDays};return M(()=>{w()}),(r,t)=>{const n=p("el-input"),d=p("el-form-item"),m=p("el-col"),y=p("el-row"),f=p("el-option"),c=p("el-select"),K=p("el-button"),k=p("el-form"),L=p("el-card");return i(),b("div",T,[l(L,{shadow:"never",header:"配置信息"},{default:s(()=>[l(k,{ref_key:"appDialogFormRef",ref:F,model:e.ruleForm,"label-width":"150px",rules:e.fromRules,size:"default"},{default:s(()=>[l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.version"),prop:"description"},{default:s(()=>[l(n,{modelValue:e.ruleForm.version,"onUpdate:modelValue":t[0]||(t[0]=a=>e.ruleForm.version=a),disabled:"",clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.maxSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.maxSlot,"onUpdate:modelValue":t[1]||(t[1]=a=>e.ruleForm.maxSlot=a),disabled:"",clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.workerSupervisorSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.workerSupervisorSlot,"onUpdate:modelValue":t[2]||(t[2]=a=>e.ruleForm.workerSupervisorSlot=a),disabled:"",clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.clusterVersion"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.clusterVersion,"onUpdate:modelValue":t[3]||(t[3]=a=>e.ruleForm.clusterVersion=a),disabled:"",clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.clusterDelayVersion"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.clusterDelayVersion,"onUpdate:modelValue":t[4]||(t[4]=a=>e.ruleForm.clusterDelayVersion=a),disabled:"",clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayZsetSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.delayZsetSlot,"onUpdate:modelValue":t[5]||(t[5]=a=>e.ruleForm.delayZsetSlot=a),clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayAddListSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.delayAddListSlot,"onUpdate:modelValue":t[6]||(t[6]=a=>e.ruleForm.delayAddListSlot=a),clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayStatusListSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.delayStatusListSlot,"onUpdate:modelValue":t[7]||(t[7]=a=>e.ruleForm.delayStatusListSlot=a),clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayDeleteListSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.delayDeleteListSlot,"onUpdate:modelValue":t[8]||(t[8]=a=>e.ruleForm.delayDeleteListSlot=a),clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayFailZsetSlot"),prop:"name"},{default:s(()=>[l(n,{modelValue:e.ruleForm.delayFailZsetSlot,"onUpdate:modelValue":t[9]||(t[9]=a=>e.ruleForm.delayFailZsetSlot=a),clearable:"",style:{width:"96%"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.jobKeepDays"),prop:"name"},{default:s(()=>[l(c,{modelValue:e.ruleForm.jobKeepDays,"onUpdate:modelValue":t[10]||(t[10]=a=>e.ruleForm.jobKeepDays=a),filterable:"",class:"m-2",style:{width:"60%"},placeholder:"Select",size:"default"},{default:s(()=>[(i(!0),b(S,null,v(e.selectDays,a=>(i(),_(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.delayKeepDays"),prop:"name"},{default:s(()=>[l(c,{modelValue:e.ruleForm.delayKeepDays,"onUpdate:modelValue":t[11]||(t[11]=a=>e.ruleForm.delayKeepDays=a),filterable:"",class:"m-2",style:{width:"60%"},placeholder:"Select",size:"default"},{default:s(()=>[(i(!0),b(S,null,v(e.selectDays,a=>(i(),_(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.serverKeepDays"),prop:"name"},{default:s(()=>[l(c,{modelValue:e.ruleForm.serverKeepDays,"onUpdate:modelValue":t[12]||(t[12]=a=>e.ruleForm.serverKeepDays=a),filterable:"",class:"m-2",style:{width:"60%"},placeholder:"Select",size:"default"},{default:s(()=>[(i(!0),b(S,null,v(e.selectDays,a=>(i(),_(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),l(m,{xs:12,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:s(()=>[l(d,{label:u(o)("message.server.system.workerKeepDays"),prop:"name"},{default:s(()=>[l(c,{modelValue:e.ruleForm.workerKeepDays,"onUpdate:modelValue":t[13]||(t[13]=a=>e.ruleForm.workerKeepDays=a),filterable:"",class:"m-2",style:{width:"60%"},placeholder:"Select",size:"default"},{default:s(()=>[(i(!0),b(S,null,v(e.selectDays,a=>(i(),_(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),l(y,null,{default:s(()=>[l(m,null,{default:s(()=>[l(K,{type:"primary",onClick:t[14]||(t[14]=a=>g(F.value)),size:"default",style:{"margin-left":"150px"}},{default:s(()=>[z(C(u(o)("message.commonBtn.update")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}});const se=R(I,[["__scopeId","data-v-dc835dc6"]]);export{se as default};
