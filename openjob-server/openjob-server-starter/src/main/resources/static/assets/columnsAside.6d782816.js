import{h as O,r as I,ar as M,aq as B,aH as j,K as J,o as U,a4 as V,aJ as q,w as z,a9 as $,j as c,k as m,D as _,x as E,l as d,F as K,Z,n as C,u as f,C as k,J as G}from"./vue.543fafcc.js";import{p as Q}from"./index.18e5bded.js";import{u as W}from"./routesList.76e57b72.js";import{u as X}from"./themeConfig.084d7f79.js";import{e as i}from"./mitt.7f99bbc0.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";const ee={class:"layout-columns-aside"},te=["onClick","onMouseenter","title"],se={class:"columns-vertical-title font12"},ne=["href"],oe={class:"columns-vertical-title font12"},le=O({name:"layoutColumnsAside"}),ie=O({...le,setup(ae){const v=I([]),A=I(),h=W(),R=X(),{routesList:x,isColumnsMenuHover:D,isColumnsNavHover:T}=M(h),{themeConfig:a}=M(R),y=B(),g=j(),t=J({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),L=e=>{t.liIndex=e,A.value.style.top=`${v.value[e].offsetTop+t.difference}px`},b=(e,s)=>{L(s);let{path:o,redirect:l}=e;l?g.push(l):g.push(o)},P=(e,s)=>{if(!a.value.isColumnsMenuHoverPreload)return!1;let{path:o}=e;t.liOldPath=o,t.liOldIndex=s,t.liHoverIndex=s,i.emit("setSendColumnsChildren",u(o)),h.setColumnsMenuHover(!1),h.setColumnsNavHover(!0)},N=async()=>{await h.setColumnsNavHover(!1),setTimeout(()=>{!D&&!T&&i.emit("restoreDefault")},100)},S=e=>{G(()=>{L(e)})},w=()=>{var s;t.columnsAsideList=H(x.value);const e=u(y.path);if(Object.keys(e).length<=0)return!1;S((s=e.item)==null?void 0:s.k),i.emit("setSendColumnsChildren",e)},u=e=>{const s=e.split("/");let o={children:[]};return t.columnsAsideList.map((l,n)=>{l.path===`/${s[1]}`&&(l.k=n,o.item={...l},o.children=[{...l}],l.children&&(o.children=l.children))}),o},H=e=>e.filter(s=>{var o;return!((o=s.meta)!=null&&o.isHide)}).map(s=>(s=Object.assign({},s),s.children&&(s.children=H(s.children)),s)),F=e=>{t.routeSplit=e.split("/"),t.routeSplit.shift();const s=`/${t.routeSplit[0]}`,o=t.columnsAsideList.find(l=>l.path===s);if(!o)return!1;setTimeout(()=>{S(o.k)},0)};return U(()=>{w(),i.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),V(()=>{i.off("restoreDefault",()=>{})}),q(e=>{F(e.path),i.emit("setSendColumnsChildren",u(e.path))}),z(Q.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)t.liHoverIndex=null,i.emit("setSendColumnsChildren",u(y.path));else{if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;i.emit("setSendColumnsChildren",u(t.liOldPath))}},{deep:!0}),(e,s)=>{const o=$("SvgIcon"),l=$("el-scrollbar");return c(),m("div",ee,[_(l,null,{default:E(()=>[d("ul",{onMouseleave:s[0]||(s[0]=n=>N())},[(c(!0),m(K,null,Z(t.columnsAsideList,(n,r)=>(c(),m("li",{key:r,onClick:p=>b(n,r),onMouseenter:p=>P(n,r),ref_for:!0,ref:p=>{p&&(v.value[r]=p)},class:C({"layout-columns-active":t.liIndex===r,"layout-columns-hover":t.liHoverIndex===r}),title:e.$t(n.meta.title)},[!n.meta.isLink||n.meta.isLink&&n.meta.isIframe?(c(),m("div",{key:0,class:C(f(a).columnsAsideLayout)},[_(o,{name:n.meta.icon},null,8,["name"]),d("div",se,k(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,f(a).columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],2)):(c(),m("div",{key:1,class:C(f(a).columnsAsideLayout)},[d("a",{href:n.meta.isLink,target:"_blank"},[_(o,{name:n.meta.icon},null,8,["name"]),d("div",oe,k(e.$t(n.meta.title)&&e.$t(n.meta.title).length>=4?e.$t(n.meta.title).substr(0,f(a).columnsAsideLayout==="columns-vertical"?4:3):e.$t(n.meta.title)),1)],8,ne)],2))],42,te))),128)),d("div",{ref_key:"columnsAsideActiveRef",ref:A,class:C(f(a).columnsAsideStyle)},null,2)],32)]),_:1})])}}});const he=Y(ie,[["__scopeId","data-v-e9a1a406"]]);export{he as default};
